class LandView{constructor(t,...e){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.min_fontsize=9,this.canvas.setAttribute("width",this.canvas.clientWidth),this.canvas.setAttribute("height",this.canvas.clientHeight)}activeratio(t,e,i){let l=Object.keys(t),s=0;for(let a=0;a<l.length;a++){let h=l[a];if(h==e){let n=t[h];for(let c=0;c<n.length;c++)if(n[c].lot==i){s=n[c].ratio?n[c].ratio:1;break}break}}return s}draw_dot(t,e,i,l){let s=this.ctx;s.fillStyle=l,s.beginPath(),s.arc(t,e,i,0,2*Math.PI),s.closePath(),s.fill()}draw_text(t,e,i,l,s){let a=this.ctx;a.font=`${i}pt 'MS Gothic'`;let h=a.measureText(s);a.fillStyle=l,a.fillText(s,t-h.width/2,e+i/2)}draw(t,e,...[i,l]){this.canvas.setAttribute("width",this.canvas.clientWidth),this.canvas.setAttribute("height",this.canvas.clientHeight);let s=this.ctx;s.clearRect(0,0,this.canvas.width,this.canvas.height);let a=Object.keys(t);for(let h=0;h<a.length;h++){let n=a[h],c=t[n];s.beginPath();let r=-1,o=-1,$=0,f=0,d=0;for(let v=0;v<c.length;v++){let g=c[v],b=g[0],_=g[1];if(0==v?s.moveTo(b,_):s.lineTo(b,_),-1!=r){let w=(r*_-b*o)/2;$+=w,f+=w*(r+b)/3,d+=w*(o+_)/3}r=b,o=_}s.closePath();let x=(r*c[0][1]-c[0][0]*o)/2;f+=x*(r+c[0][0])/3,d+=x*(o+c[0][1])/3,$+=x;let u=f/$,k=d/$,m=(Math.sqrt($)/10)**1.05,y=0;if(m<this.min_fontsize&&(y=(Math.floor(3*Math.random())-1)*(m=this.min_fontsize)/2),i){let P=this.activeratio(i,l,n);P>0&&(s.fillStyle=`rgba(255,0,0,${P}`,s.fill())}s.strokeStyle="hotpink",s.stroke(),e>0&&this.draw_text(u,k+y,m,"blue",n)}}}