<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style2.css">
    <link rel="stylesheet" href="css/CultiLog.css">
    <meta name="description" content="野菜作り">
    <link rel="shortcut icon" href="img/kame.ico">
    <title>野菜作り</title>
    <style>
        #topimg {
            border-radius: 6px;
            width: 300px;
            display: block;
            margin-top: 1em;
            margin-left: auto;
            margin-right: auto;
        }
        img.floatright {
            margin-left: 0.5em;
        }
        img.floatleft {
            margin-right: 0.5em;
        }
        /* 栽培記録 */
        #CultiLog img {
            width: 40%;
        }
        /* .notes {
            font-size: smaller;
            color: dimgray;
            margin-left: 1em;
        } */
        @media (max-width: 700px) {
            #topimg {
                border-radius: 4px;
                width: 180px;
            }
            img.floatright {
                max-width: 50%;
                margin-left: 0.3em;
            }
            img.floatleft {
                max-width: 50%;
                margin-right: 0.3em;
            }
            #CultiPlan {
                width: 28em;
            }
            #CultiMap {
                /* 最大幅 for mobile */
                max-width: 110%;
            }
        }
    </style>
</head>
<body>

<!-- input・label・ドロワーメニューはbody直下 -->
<input id="check_input" type="checkbox">
<label id="menu_btn" for="check_input"> <!-- ハンバーガーボタン部分 -->
    <span></span><div id="title">MENU</div>
</label>
<label id="drawer_back" for="check_input"></label> <!-- ドロワーメニューの背景部分 -->

<div id="menu_cont"> <!-- ドロワーメニュー本体部分 -->
    <ul>
        <li><a href="index.html">TOP</a></li>
        <li><a href="intro.html">経緯と方針</a></li>
        <li><a href="menu.html">飼育環境</a></li>
        <li><a href="maintenance.html">日々の管理</a></li>
        <li><a href="trouble.html">トラブル</a></li>
        <li><a href="baby.html">成長記録</a></li>
    </ul>
    <ul id="menu2nd">
        <li>&nbsp;</li>
        <li><a href="https://www.instagram.com/ishigame65/">Instagram<img src="img/insta60.png" alt="" id="instaicon"></a></li>
        <li><a href="keeper.html">飼育係</a></li>
        <li><a href="entertainment.html">遊び</a></li>
        <li><a href="links.html">リンク</a></li>
        <li><a href="copyright.html">サイトポリシー</a></li>
        <li><a href="sitemap.html">サイトマップ</a></li>
    </ul>
</div>

<header>
    <h1><a href="index.html"><img id="logo" src="img/logo.png" alt="Ishigame65"></a></h1>
    <nav>
        <ul>
            <li><a href="intro.html">経緯と方針</a></li>
            <li><a href="menu.html">飼育環境</a></li>
            <li><a href="maintenance.html">日々の管理</a></li>
            <li><a href="trouble.html">トラブル</a></li>
            <li><a href="baby.html">成長記録</a></li>
        </ul>    
    </nav>
</header>

<div id="wrapper"> <!-- コンテンツ部分をdivで囲む　input要素と同じ階層に配置する -->
    <main> <!-- メインコンテンツ -->
        <div class="breadcrumb">
            <ul>
                <li><a href="index.html">Top</a></li>
                <li><a href="keeper.html">飼育係</a></li>
                <li><a href="profile.html">プロフィール</a></li>
                <li>野菜作り</li>
            </ul>
        </div> <!-- breadcrumb -->

        <h2 class="mono">野菜作り</h2>
        <article>
            <img id="topimg" src="img/garden2.jpg">
        </article>
        <article>
            <h3 class="mono">菜園カレンダー</h3>
            <p class="article_content">
                いつ何を植えれば良いかも分かっていない素人が手探りで野菜を育てているが、野菜は時期を逃すと栽培できないため、
                野菜作りに必要な作業を行う時期が一目でわかる菜園カレンダーを作ることにした
                <canvas id="CultiPlan" width="450" height="620"></canvas>
                <!-- <h4>栽培記録</h4> -->
                一般的なツールでは上手く作れず、良い作図ライブラリも見つからなかったため、専用の<a href='cultilib.html'>栽培ライブラリ</a>を開発してから菜園カレンダーを作ることになった
            </p>
        </article>
        <article>
            <h3 class="mono">菜園マップ</h3>
            <p class="article_content">
                5月の菜園マップ
                <canvas id="CultiMap" width="432" height="297"></canvas>
                開発した<a href='cultilib.html'>栽培ライブラリ</a>に菜園マップを作成する機能を追加した
                <div class="notes">
                    現状、栽培区画の座標値を㎝単位の数値で指定する必要がある。
                    一般的な作図ツール（ドロー系ソフト）で作成する方が楽かもしれない
                </div>
            </p>
        </article>
        <article>
            <h3 class="mono">栽培記録</h3>
            <p class="article_content">
                <div id="CultiLog"></div>
                開発した<a href='cultilib.html'>栽培ライブラリ</a>に栽培記録を作成する機能を追加し、作物ごとの栽培記録をポップアップ表示する仕組みとした
            </p>
        </article>
        <article>
            <h3 class="mono">花壇のレンガ積み</h3>
            <p class="article_content">
                <img src="img/brick1.jpg" class = "floatright">
                亀池用のタライを埋めるために庭を掘ると土や石や瓦礫が出てできて処分に困る。
                そこで、石や瓦礫をモルタルで固めて偽レンガを作り、偽レンガを積んで花壇を作り土を入れた。<br>
                偽レンガを作る時の<a href='brickmold.html'>モルタルレンガ用型枠</a>は3Dプリンタで製作した
            </p>
        </article>

    </main> <!-- メインコンテンツ -->
    <footer> <!-- フッターコンテンツ -->
        <div id="footicons">
            <a href="https://www.instagram.com/ishigame65/"><img src="img/insta60.png" alt="" id="instaicon2"></a>
            <a href="#logo"><span class="arrow-up"></span></a>    
        </div>
        <div id="footlinks">
            <ul>
                <li><a href="keeper.html">飼育係</a></li>
                <li><a href="entertainment.html">遊び</a></li>
                <li><a href="links.html">リンク</a></li>
                <li><a href="copyright.html">サイトポリシー</a></li>
                <li><a href="sitemap.html">サイトマップ</a></li>
            </ul>
        </div>
    </footer>
</div>

<!-- 栽培ライブラリを読み込み -->
<script src="js/CultivationPlants.min.js"></script>
<script src="js/CultivationPlan.min.js"></script>
<script src="js/CultivationMap.min.js"></script>
<script src="js/CultivationLog.min.js"></script>

<!-- 菜園カレンダーと栽培記録を作成する -->
<script>
    // 栽培計画作成
    function make_plan(plan) {
        // 栽培計画:作業定義（作業名, 色）
        plan.add_action('種蒔き', 'brown');
        plan.add_action('植え付け', 'limegreen');
        plan.add_action('収穫', 'gold');
        plan.add_action('株分け', 'orchid');
        plan.add_action('堀り上げ', 'turquoise');

        // 栽培計画:状態設定
        plan.add_status('invalid', 'gray'); // 状態定義（状態名, 色）
        plan.set_status_opacity(0.5);   // 状態色不透明度

        // 栽培計画:データ準備
        const colors = ['Lavender', 'lightcyan'];
        const dataset_0 = [
            // 'name':対象名、作業名:期間、作業名:期間
            // 　（期間）開始月-終了月、（オプション）a:上旬, b:中旬, c:下旬
            { 'name':'ニラ', '種蒔き':'3b-4a', '植え付け':'6b-7a', 'color':colors[0], 'status':'valid' },
            { 'name':'ニラ/2年目～', '収穫':'4-10', 'color':colors[0], 'status':'valid' },
            { 'name':'ニラ/3年目～', '株分け':'2c-3a', 'color':colors[0], 'status':'valid' },
            { 'name':'ジャガイモ', '植え付け':'3-3', '収穫':'6-7a', 'color':colors[0], 'status':'valid' },  // ジャガイモは3月に植え付け、6月～7月上旬に収穫
            { 'name':'パクチー', '種蒔き':'3-4', '収穫':'6-10', 'color':colors[0], 'status':'valid' },
            { 'name':'パセリ', '植え付け':'4-5', 'color':colors[0], 'status':'incomplete' },
            { 'name':'チンゲン菜', '種蒔き':'3b-10b', '収穫':'5c-11b', 'color':colors[0], 'status':'invalid' },
            { 'name':'空心菜', '種蒔き':'4-5', '植え付け':'5-7', 'color':colors[0], 'status':'valid' },
            { 'name':'オクラ', '種蒔き':'4b-5a', '植え付け':'5c-6b', '収穫':'7-9', 'color':colors[0], 'status':'valid' },
            { 'name':'キュウリ苗', '植え付け':'4c-5b', '収穫':'6-8', 'color':colors[0], 'status':'valid' },
            { 'name':'とうがらし苗', '植え付け':'5-5', 'color':colors[0], 'status':'incomplete' },
            { 'name':'ミニトマト苗', '植え付け':'5-6b', '収穫':'7-10a', 'color':colors[0], 'status':'valid' },
            { 'name':'ゴーヤ苗', '植え付け':'5-6', 'color':colors[0], 'status':'invalid' },
            { 'name':'バジル苗', '植え付け':'5-7', 'color':colors[0], 'status':'invalid' },
            { 'name':'九条ネギ干苗', '堀り上げ':'5-6a', '植え付け':'8-9a', '収穫':'10-4', 'color':colors[0], 'status':'valid' },
            { 'name':'菜花', '種蒔き':'8b-10b', '収穫':'11-3', 'color':colors[0], 'status':'valid' },
            { 'name':'にんにく', '植え付け':'9b-10', '収穫':'5-6', 'color':colors[0], 'status':'valid' },
            { 'name':'イチゴ苗', '植え付け':'10-11', '収穫':'5-6', 'color':colors[0], 'status':'valid' },
            { 'name':'スナップえんどう', '種蒔き':'10c-11', '収穫':'4c-7a', 'color':colors[0], 'status':'incomplete' },
            { 'name':'玉ねぎ苗', '植え付け':'11b-12b', '収穫':'6-7a', 'color':colors[0], 'status':'valid' },
        ];
        const dataset = dataset_0.filter(data => data.status != 'incomplete');    // 不完全データを取り除く
        for (i = 0; i < dataset.length; i++) if (i % 2 != 0) dataset[i].color = colors[1];  // 奇数番目の色を変える

        // 栽培計画:描画準備
        plan.set_font("14px 'MS P Gothic'");    // フォント設定（オプション）
        plan.set_padding(7);                    // パディング設定（オプション）
        plan.set_border(0.25, 'gray');          // 罫線の幅と色を設定（オプション）
        plan.set_month_bgcolor('LightYellow');  // 月背景色設定（オプション）
        // plan.hide_legend();                  // 凡例非表示（オプション）
        plan.set_today(0.5, 'red');             // 本日線設定（オプション）
        return dataset;
    }

    // 栽培地図作成
    function make_map(map) {
        // 栽培地図設定
        map.set_size(480, 330);         // 栽培エリアサイズ設定（単位cm）
        map.set_direction(-30, 10, 10); // 方位設定（オプション：角度、X位置、Y位置）
        map.set_font("14px 'MS P Gothic'"); // フォント設定（オプション）
        //lplanter[i].set_font("10px 'MS P Gothic'"); // フォント設定（オプション）
        //lplanter[i].set_size(23, 65.5);             // 栽培エリアサイズ設定（単位cm）
        //lplanter[2].set_size(26, 75);           // 栽培エリアサイズ設定（単位cm）
        //splanter[i].set_size(35, 35);               // 栽培エリアサイズ設定（単位cm）
        //splanter[i].set_font("10px 'MS P Gothic'"); // フォント設定（オプション）

        // 非栽培エリア設定（色、区画）
        map.set_dead_color('approach', 'lightsteelblue');   // アプローチ
        map.set_dead_color('brick', 'sienna');      // 花壇レンガ
        map.set_dead_color('path', 'BurlyWood');    // 通路
        map.set_dead_color('cage', 'LightSkyBlue'); // 亀ケージ
        map.set_dead_color('rose', 'hotpink');      // バラ
        map.add_dead('path', 0, 124, 48, 86);       // 通路（x,y,w,h）
        map.add_dead('approach', 0, 190, 35, 140);  // アプローチ
        map.add_dead('brick', 35, 258.5, 444, 8.5); // 花壇レンガ
        map.add_dead('path', 35, 209.5, 386, 49);   // 通路横
        map.add_dead('path', 358, 0, 34, 225);      // 通路縦
        map.add_dead('cage', 392, 0, 87, 140);      // 亀ケージ
        map.add_dead('rose', 419, 267, 60, 62);     // バラ
        //lplanter[i].set_dead_color('planter', 'gray');
        //lplanter[i].add_dead('planter', 0, 0, 2, 65.5);
        //lplanter[i].add_dead('planter', 21, 0, 2, 65.5);
        //lplanter[i].add_dead('planter', 0, 0, 23, 2);
        //lplanter[i].add_dead('planter', 0, 63.5, 23, 2);
        //lplanter[2].add_dead('planter', 0, 0, 2, 75);
        //lplanter[2].add_dead('planter', 24, 0, 2, 75);
        //lplanter[2].add_dead('planter', 0, 0, 26, 2);
        //lplanter[2].add_dead('planter', 0, 73, 26, 2);
        //splanter[i].set_dead_color('planter', 'gray');
        //splanter[i].add_dead('planter', 0, 0, 2.5, 35);
        //splanter[i].add_dead('planter', 32.5, 0, 2.5, 35);
        //splanter[i].add_dead('planter', 0, 0, 35, 2.5);
        //splanter[i].add_dead('planter', 0, 32.5, 35, 2.5);

        // 栽培植物設定（色）
        const plants = new CultivationPlants();     // 栽培植物
        plants.set_color('パクチー', 'greenyellow');    // 植物色設定
        plants.set_color('ミニトマト', 'tomato');
        plants.set_color('キュウリ', 'springgreen');
        plants.set_color('ニラ', 'mediumseagreen');
        plants.set_color('玉ねぎ', 'khaki');
        plants.set_color('ジャガイモ', 'sandybrown');
        plants.set_color('バジル', 'Plum');
        plants.set_color('九条ネギ', 'DarkTurquoise');
        plants.set_color('にんにく', 'beige');

        // 菜園マップに栽培植物設定
        map.set_plants(plants);                 // 栽培植物設定

        // 作物区画設定
        map.add_plant('パクチー', 392, 140, 87, 69);
        map.add_plant('パクチー', 421, 208, 58, 51);
        map.add_plant('ミニトマト', 276, 138, 82, 72);
        map.add_plant('キュウリ', 276, 24, 82, 72);
        map.add_plant('ニラ', 48, 166, 228, 44);
        map.add_plant('ニラ', 0, 0, 358, 24);
        map.add_plant('玉ねぎ', 48, 124, 228, 44);
        map.add_plant('ジャガイモ', 0, 24, 276, 100);
        map.add_plant('ニラ', 35, 267, 40, 62);
        map.add_plant('玉ねぎ', 75, 267, 121, 62);
        map.add_plant('ニラ', 196, 267, 70, 62);
        map.add_plant('にんにく', 266, 267, 83, 62);
        map.add_plant('バジル', 349, 267, 70, 62);
        //lplanter[i].add_plant('九条ネギ', 2, 2, 19, 61.5);
        //lplanter[2].add_plant('九条ネギ', 2, 2, 22, 71);
        //splanter[i].add_plant('にんにく', 2.5, 2.5, 30, 30);
    }

    // 栽培記録作成
    function make_log(log) {
        log.add_log('九条ネギ', '2025/06/07', 'img/a250607n1.jpg, img/a250607n2.jpg', '干し苗の仮植え');
        log.add_log('ニラ', '2023/06/25', 'img/a230625nr.jpg', '1年目夏');
        log.add_log('ニラ', '2024/04/26', 'img/a240426nr.jpg', '2年目春');
        log.add_log('ニラ', '2025/01/25', 'img/a250113nr1.jpg, img/a250113nr2.jpg', '3年目冬刈取');
        log.add_log('ニラ', '2025/03/07', 'img/a250307nr.jpg', '3年目春株分け6日後');
        log.add_log('玉ねぎ', '2025/06/07', 'img/a250607t.jpg', '収穫');
        log.add_log('ジャガイモ', '2025/06/18', 'img/a250618jg1.jpg', '収穫');
        
        log.set_margin('0 0 1em 1em');  // 周囲余白指定（上、右、下、左）
    }

    // 栽培計画作成
    const plan = new CultivationPlan("CultiPlan");  // 栽培計画オブジェクト生成
    const dataset = make_plan(plan);                // 栽培計画作成

    // 菜園マップ作成
    const map = new CultivationMap("CultiMap");     // 栽培地図オブジェクト生成
    make_map(map);  // 栽培地図作成

    // 栽培記録
    const log = new CultivationLog("CultiLog"); // 栽培記録オブジェクト生成
    make_log(log);  // 栽培記録作成
    log.set_logs(); // 栽培記録を設定

    // 描画
    window.addEventListener('load', function() {
        plan.draw(dataset); // 栽培計画
        map.draw(); // 栽培地図
    });

</script>
<!-- ポップアップライブラリを読み込み -->
<script src="js/popup.min.js"></script>

</body>
</html>
